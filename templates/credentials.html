{% extends "base.html" %}

{% block title %}Credentials - NotionSync{% endblock %}

{% block content %}
<div class="credentials-page">
    <h2>API Credentials</h2>
    
    {% if error %}
    <div class="alert alert-error">{{ error }}</div>
    {% endif %}
    
    <form method="POST" class="credentials-form">
        <div class="form-group">
            <label for="canvas_api_key">Canvas API Key</label>
            <input type="password" 
                   id="canvas_api_key" 
                   name="canvas_api_key" 
                   value="{{ creds.get('canvas_api_key', '') }}"
                   required>
            <small>Your Canvas API token for accessing assignment data</small>
        </div>

        <div class="form-group">
            <label for="canvas_base_url">Canvas Base URL</label>
            <input type="text" 
                   id="canvas_base_url" 
                   name="canvas_base_url" 
                   value="{{ creds.get('canvas_base_url', 'https://canvas.instructure.com/api/v1') }}"
                   required>
            <small>Your institution's Canvas API endpoint</small>
        </div>

        <div class="form-group">
            <label for="notion_api_key">Notion API Key</label>
            <input type="password" 
                   id="notion_api_key" 
                   name="notion_api_key" 
                   value="{{ creds.get('notion_api_key', '') }}"
                   required>
            <small>Your Notion integration token</small>
        </div>

        <div class="form-group">
            <label for="notion_database_id">Notion Database ID</label>
            <input type="text" 
                   id="notion_database_id" 
                   name="notion_database_id" 
                   value="{{ creds.get('notion_database_id', '') }}"
                   required>
            <small>The ID of your Notion database for assignments</small>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Credentials</button>
            <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>

    <div class="help-section">
        <h3>How to get your credentials:</h3>
        <ul>
            <li><strong>Canvas API Key:</strong> Go to Canvas → Account → Settings → New Access Token</li>
            <li><strong>Canvas Base URL:</strong> Usually https://[your-institution].instructure.com/api/v1</li>
            <li><strong>Notion API Key:</strong> Create an integration at https://www.notion.so/my-integrations</li>
            <li><strong>Notion Database ID:</strong> Found in the URL of your database page</li>
        </ul>
    </div>
</div>
{% endblock %}
